use rand::seq::SliceRandom;
use selo::prelude::*;

fn main() {
    let mut polygons = vec![
        Ring::new([
            Vec2::new(17.973066, 14.911789),
            Vec2::new(2.249273, 12.372542),
            Vec2::new(8.231152, -1.8374705),
        ]),
        Ring::new([
            Vec2::new(-11.814244, -2.1060443),
            Vec2::new(-11.887492, -9.699368),
            Vec2::new(-11.667696, -9.699368),
        ]),
        Ring::new([
            Vec2::new(2.249273, 12.372542),
            Vec2::new(17.973066, 14.911789),
            Vec2::new(2.273689, 15.033868),
        ]),
        Ring::new([
            Vec2::new(8.231152, -1.8374705),
            Vec2::new(17.826572, -1.9107175),
            Vec2::new(17.973066, 14.911789),
        ]),
        Ring::new([
            Vec2::new(-0.9247782, -9.797031),
            Vec2::new(8.231152, -1.8374705),
            Vec2::new(-11.814244, -2.1060443),
        ]),
        Ring::new([
            Vec2::new(8.231152, -1.8374705),
            Vec2::new(-0.9247782, -9.797031),
            Vec2::new(8.157904, -9.870278),
        ]),
        Ring::new([
            Vec2::new(-11.667755, 14.887372),
            Vec2::new(-4.318585, 12.44579),
            Vec2::new(-4.318585, 14.814125),
        ]),
        Ring::new([
            Vec2::new(-11.814244, -2.1060443),
            Vec2::new(-0.7293748, 12.396957),
            Vec2::new(-4.318585, 12.44579),
        ]),
        Ring::new([
            Vec2::new(-4.318585, 12.44579),
            Vec2::new(-11.667755, 14.887372),
            Vec2::new(-11.814244, -2.1060443),
        ]),
        Ring::new([
            Vec2::new(-0.7293748, 12.396957),
            Vec2::new(8.231152, -1.8374705),
            Vec2::new(2.249273, 12.372542),
        ]),
        Ring::new([
            Vec2::new(-11.814244, -2.1060443),
            Vec2::new(-11.667696, -9.699368),
            Vec2::new(-0.9247782, -9.797031),
        ]),
        Ring::new([
            Vec2::new(-20.823687, -2.008381),
            Vec2::new(-11.667755, 14.887372),
            Vec2::new(-20.67719, 14.96062),
        ]),
        Ring::new([
            Vec2::new(8.231152, -1.8374705),
            Vec2::new(-0.7293748, 12.396957),
            Vec2::new(-11.814244, -2.1060443),
        ]),
        Ring::new([
            Vec2::new(-11.667755, 14.887372),
            Vec2::new(-20.823687, -2.008381),
            Vec2::new(-11.814244, -2.1060443),
        ]),
    ];

    // polygons.shuffle(&mut rand::rng());

    let result = polygons
        .into_iter()
        .fold(MultiPolygon::default(), |acc, p| acc.union_approx(&p, 1e-3));
    println!("{result:?}");
}
